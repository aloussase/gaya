<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Gaya Language Book</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="getting-started/installing.html"><strong aria-hidden="true">1.</strong> Installing Gaya</a></li><li class="chapter-item expanded "><a href="getting-started/tooling.html"><strong aria-hidden="true">2.</strong> Tooling</a></li><li class="chapter-item expanded "><a href="getting-started/hello-gaya.html"><strong aria-hidden="true">3.</strong> Hello, Gaya!</a></li><li class="chapter-item expanded affix "><li class="part-title">Language Reference</li><li class="chapter-item expanded "><a href="reference/basic-syntax.html"><strong aria-hidden="true">4.</strong> Basic Syntax</a></li><li class="chapter-item expanded "><a href="reference/perform.html"><strong aria-hidden="true">5.</strong> Discarding values and performing statements</a></li><li class="chapter-item expanded "><a href="reference/truthiness.html"><strong aria-hidden="true">6.</strong> Truthiness</a></li><li class="chapter-item expanded "><a href="reference/operators.html"><strong aria-hidden="true">7.</strong> Operators</a></li><li class="chapter-item expanded "><a href="reference/function.html"><strong aria-hidden="true">8.</strong> Functions</a></li><li class="chapter-item expanded "><a href="reference/let-expression.html"><strong aria-hidden="true">9.</strong> Let Expression</a></li><li class="chapter-item expanded "><a href="reference/cases-expression.html"><strong aria-hidden="true">10.</strong> Cases Expression</a></li><li class="chapter-item expanded "><a href="reference/match-expression.html"><strong aria-hidden="true">11.</strong> Match Expression</a></li><li class="chapter-item expanded "><a href="reference/do-expression.html"><strong aria-hidden="true">12.</strong> Do Expression</a></li><li class="chapter-item expanded "><a href="reference/control-flow.html"><strong aria-hidden="true">13.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="reference/assignment.html"><strong aria-hidden="true">14.</strong> Assignment</a></li><li class="chapter-item expanded "><a href="reference/closures.html"><strong aria-hidden="true">15.</strong> Closures</a></li><li class="chapter-item expanded "><a href="reference/include.html"><strong aria-hidden="true">16.</strong> Include Statements</a></li><li class="chapter-item expanded "><a href="reference/structs.html"><strong aria-hidden="true">17.</strong> Structs</a></li><li class="chapter-item expanded "><a href="reference/enums.html"><strong aria-hidden="true">18.</strong> Enums</a></li><li class="chapter-item expanded affix "><li class="part-title">Types</li><li class="chapter-item expanded "><a href="types/strings.html"><strong aria-hidden="true">19.</strong> Strings</a></li><li class="chapter-item expanded "><a href="types/arrays.html"><strong aria-hidden="true">20.</strong> Arrays</a></li><li class="chapter-item expanded "><a href="types/dictionaries.html"><strong aria-hidden="true">21.</strong> Dictionaries</a></li><li class="chapter-item expanded "><a href="types/sequences.html"><strong aria-hidden="true">22.</strong> Sequences</a></li><li class="chapter-item expanded affix "><li class="part-title">Standard Library</li><li class="chapter-item expanded "><a href="std/core.html"><strong aria-hidden="true">23.</strong> Core</a></li><li class="chapter-item expanded "><a href="std/io.html"><strong aria-hidden="true">24.</strong> IO</a></li><li class="chapter-item expanded "><a href="std/strings.html"><strong aria-hidden="true">25.</strong> Strings</a></li><li class="chapter-item expanded "><a href="std/arrays.html"><strong aria-hidden="true">26.</strong> Arrays</a></li><li class="chapter-item expanded "><a href="std/dictionaries.html"><strong aria-hidden="true">27.</strong> Dictionaries</a></li><li class="chapter-item expanded "><a href="std/sequences.html"><strong aria-hidden="true">28.</strong> Sequences</a></li><li class="chapter-item expanded "><a href="std/functions.html"><strong aria-hidden="true">29.</strong> Functions</a></li><li class="chapter-item expanded "><a href="std/math.html"><strong aria-hidden="true">30.</strong> Math</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Gaya Language Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/aloussase/gaya" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="gaya"><a class="header" href="#gaya">Gaya</a></h1>
<p>Gaya is a dynamically typed scripting language that uses a tree-walk
interpreter for its implementation and performs a number of optimizations to
make it usable. Some of these optimizations are:</p>
<ul>
<li>Nan Boxing</li>
<li>Efficient hash table implementation</li>
<li>Precomputing hash keys in AST nodes</li>
<li>Resolving identifiers statically</li>
</ul>
<p>These optimizations are important because I wanted to use
the language for <a href="https://adventofcode.com/">Advent of Code</a>
and without them it was ridiculously slow.</p>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>I've had interest in programming languages for a long time, but never before
had I put a somewhat serious effort into implementing my own.</p>
<p>This effort started when I learnt about <a href="https://typst.app/">Typst</a> and tried
to use it to solve some graph processing problems for a hackathon. I realized
that a language as simple as it was enough for the task at hand, and thought to
myself: &quot;Surely I can make one myself!&quot;. And here we are now.</p>
<p>I made the language with a focus on elegance first and performance second (you
can't ask for much from a tree-walk interpreter). I wanted to make something
that makes me feel pleasure every time I use it. I hope this way I can give
pleasure to you too.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installing-gaya"><a class="header" href="#installing-gaya">Installing Gaya</a></h1>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<p>You need to have a C++ and D compiler (GDC specifically). You can install them
on Debian by running the following command:</p>
<pre><code>sudo apt-get install build-essential cmake gdc
</code></pre>
<h2 id="building-gaya"><a class="header" href="#building-gaya">Building Gaya</a></h2>
<p>You can install Gaya by building it from source:</p>
<pre><code>git clone --recurse-submodules https://github.com/aloussase/gaya
cd gaya
cmake -B build -S . -DCMAKE_BUILD_TYPE=Release
cmake --build build
sudo cmake --install build
</code></pre>
<p>The process should be straightforward, I do it always when working on the
language ;).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tooling"><a class="header" href="#tooling">Tooling</a></h1>
<h2 id="neovim"><a class="header" href="#neovim">Neovim</a></h2>
<p>I use Neovim, so you can find a plugin for it in the project's
<a href="https://github.com/aloussase/gaya">repository</a>. That plugin provides syntax
highlighting and indentation configuration for a more pleasant experience.</p>
<p>I might write an LSP server for Gaya sometime, that sounds like a fun
challenge.</p>
<h2 id="other-editors"><a class="header" href="#other-editors">Other editors</a></h2>
<p>You can open a PR adding support for other editors if you want.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hello-gaya"><a class="header" href="#hello-gaya">Hello, Gaya!</a></h1>
<p>Create a file named <code>hello.gaya</code> with the following contents:</p>
<pre><code>io.println(&quot;Hello, Gaya!&quot;).
</code></pre>
<p>And run it with <code>gaya hello.gaya</code>. You should see the following output:</p>
<pre><code class="language-bash">Hello, Gaya!
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-syntax"><a class="header" href="#basic-syntax">Basic Syntax</a></h1>
<h2 id="coments"><a class="header" href="#coments">Coments</a></h2>
<p>Comments are OCaml style:</p>
<pre><code class="language-ocaml">(* This is a comment *)

(*
  Works across multiple lines as well.
*)
</code></pre>
<p>Not much more to comment here.</p>
<h2 id="literals"><a class="header" href="#literals">Literals</a></h2>
<h3 id="strings"><a class="header" href="#strings">Strings</a></h3>
<p>Gaya has string literals that support escape sequences (but no unicode):</p>
<pre><code class="language-ocaml">&quot;Hello world&quot;

&quot;Hello, world!\n&quot;

&quot;\x1b[31mHello Red\n\x1b[m&quot;
</code></pre>
<h3 id="numbers"><a class="header" href="#numbers">Numbers</a></h3>
<p>Numbers map to C++ <code>double</code> values and work pretty much as you would expect in
other programming languages:</p>
<pre><code class="language-ocaml">42
42.69
-42
</code></pre>
<p>There is no exponent notation though.</p>
<h3 id="unit"><a class="header" href="#unit">Unit</a></h3>
<p>The unit value is represented by the <code>unit</code> keyword.</p>
<pre><code>unit
</code></pre>
<h3 id="arrays"><a class="header" href="#arrays">Arrays</a></h3>
<p>Arrays are comma-separated lists of expression enclosed in parenthesis:</p>
<pre><code>(* The empty array. *)
()

(* Nesting is supported. *)
(1, 2, &quot;Hello&quot;, (5, 6))
</code></pre>
<p>More on arrays on their dedicated chapter.</p>
<h3 id="dictionaries"><a class="header" href="#dictionaries">Dictionaries</a></h3>
<p>Dictionaries are much like arrays, but the values are key-value pairs separated
by a '-&gt;':</p>
<pre><code>(* The empty dict. *)
(-&gt;)

(* Nesting is supported as well. *)
(1 -&gt; 2, &quot;Hello&quot; -&gt; &quot;World&quot;, (3 -&gt; 4))
</code></pre>
<h2 id="keywords"><a class="header" href="#keywords">Keywords</a></h2>
<p>Here's a list of Gaya keywords:</p>
<ul>
<li>and</li>
<li>cases</li>
<li>do</li>
<li>end</li>
<li>for</li>
<li>given</li>
<li>in</li>
<li>include</li>
<li>let</li>
<li>not</li>
<li>of</li>
<li>or</li>
<li>otherwise</li>
<li>perform</li>
<li>type</li>
<li>unit</li>
<li>when</li>
<li>while</li>
<li>with</li>
</ul>
<p>That's a grand total of 19 (17 if you don't count <code>and</code> and <code>or</code>, since they
are technically operators).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="discarding-values-and-performing-statements"><a class="header" href="#discarding-values-and-performing-statements">Discarding values and performing statements</a></h1>
<p>To discard the result of an expression, which is mandatory if you are not using
it, you put a '.' at the end, just like semicolons in Rust for example.</p>
<p>On the other hand, <code>perform</code> allows you to <em>perform</em> a single statement in an
expression context, returning <code>unit</code>.</p>
<p>This combination is useful in control structures that expect statements or
expressions, but you need to do the other. For example, <code>let</code> expects what
comes after <code>in</code> to be an expression, but it might be useful to put a statement
instead. This can be done in two ways.</p>
<p>First, with a <code>do</code> block:</p>
<pre><code class="language-julia">let x = 0 in do
  while x &lt; 10
    &amp;x &lt;- x + 1
  end
end
</code></pre>
<p>Second, with <code>perform</code>:</p>
<pre><code class="language-julia">let x = 0 in perform
while x &lt; 10
  &amp;x &lt;- x + 1
end
</code></pre>
<p>Both are semantically equivalent. Its a matter of taste which one you choose to
use.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="truthiness"><a class="header" href="#truthiness">Truthiness</a></h1>
<p>All values but the empty string, empty array, empty dictionary, unit and zero
are considered to be truthy.</p>
<pre><code>test :: { x =&gt;
  cases
    given x   =&gt; io.println(&quot;t&quot;)
    otherwise =&gt; io.println(&quot;f&quot;)
  end
}

test(42).    (* t *)
test(&quot;42&quot;).  (* t *)
test(unit).  (* f *)
test(&quot;&quot;).    (* f *)
test(0).     (* f *)
test(()).    (* f *)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operators"><a class="header" href="#operators">Operators</a></h1>
<p>The operators described here follow roughly the same precedence as described
<a href="https://en.cppreference.com/w/c/language/operator_precedence">here</a>.</p>
<h2 id="string-concatenation-operator"><a class="header" href="#string-concatenation-operator">String concatenation operator</a></h2>
<p>The <code>&lt;&gt;</code> operator can be used to concatenate strings. It comes from the <code>&lt;&gt;</code>
operator for semigroups in Haskell.</p>
<pre><code>greet :: { name =&gt; io.println(&quot;Hello &quot; &lt;&gt; name &lt;&gt; &quot;!&quot;)}
</code></pre>
<p>Its precedence is the same as the <code>+</code> arithmetic operator.</p>
<h2 id="arithmetic-operators"><a class="header" href="#arithmetic-operators">Arithmetic operators</a></h2>
<p>Arithmetic operations work as you would exepct in most programming languages:</p>
<pre><code class="language-ocaml">42 + 27. (* 69 *)
70 - 1.  (* 69 *)
69 * 1.  (* 69 *)

(* Division by zero returns unit. *)
cases 69 / 0
  given unit =&gt; io.println(&quot;Oops&quot;)
  otherwise  =&gt; io.println(result)
end.

(* Associativy and precedence works as expected *)
42 + 14 * 2 - 1. (* 69 *)
</code></pre>
<h2 id="comparison-operators"><a class="header" href="#comparison-operators">Comparison operators</a></h2>
<p>It is undefined behaviour to use comparison operators other than <code>==</code> and <code>/=</code>
between objects of different types.</p>
<p>Note that &quot;not equals&quot; is <code>/=</code> instead of <code>!=</code>.</p>
<p>Otherwise, comparison operators work as you'd expect in most languages.</p>
<pre><code class="language-ocaml">&quot;Hello&quot; &lt; &quot;Zap&quot; (* t *)
42 &gt;= 42        (* t *)
&quot;str&quot; == 42     (* f *)
</code></pre>
<h2 id="logical-operators"><a class="header" href="#logical-operators">Logical operators</a></h2>
<p>Gaya's logical operators are <code>and</code> and <code>or</code>, which are equivalent to <code>&amp;&amp;</code> and
<code>||</code> in other programming languages. One neat feature of these operators is
that you can use them like this:</p>
<pre><code>&quot;Hello&quot; and &quot;Gaya&quot;. (* &quot;Gaya&quot;  *)
&quot;Hello&quot; or &quot;Gaya&quot;.  (* &quot;Hello&quot; *)
</code></pre>
<p>This is useful for example to compute default values or something.</p>
<h2 id="bitwise-operators"><a class="header" href="#bitwise-operators">Bitwise operators</a></h2>
<p>Gaya has all the bitwise operators from C. Their precedences are not the same
though, as I changed it so they are more convenient. If you have any problems
using them, open an issue in the <a href="https://github.com/aloussase/gaya">repo</a>.</p>
<h2 id="pipe-operator"><a class="header" href="#pipe-operator">Pipe operator</a></h2>
<p>Gaya implements <a href="https://docs.hhvm.com/hack/expressions-and-operators/pipe">Hack style
pipes</a>. You can pipe
any expression into another one and replace the result of the first one with
placeholders on the second one. Gaya uses underscores (<code>_</code>) as placeholders.
For example:</p>
<pre><code class="language-ocaml">(* Output: H *)
io.println(0 |&gt; &quot;Hello&quot;(_)).

(* Output: 69 *)
io.println(42 |&gt; _ + 27).

(* Output: l *)
io.println(1 |&gt; _ + 2 |&gt; &quot;Hello&quot;(_)).

(* Output: Number *)
io.println(1 |&gt; typeof(_)).

(* Output: 5 *)
io.println(5 |&gt; let x = _ in x).
</code></pre>
<p>It is mandatory to use the placeholder at least once in the right hand side
expression of the pipe operator.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="functions"><a class="header" href="#functions">Functions</a></h1>
<p>Gaya has first-class support for functions. Functions are defined between curly
braces:</p>
<pre><code>{ name =&gt; io.println(&quot;Hello, &quot; &lt;&gt; name) }

{ =&gt; io.println(&quot;Gaya is cool!&quot;) }(). (* Output: Gaya is cool *)
</code></pre>
<p>As you can see, the parameters go before the <code>=&gt;</code> and the body should be a
single expression. If you need to put more, you can use a do-block. Note that
the <code>=&gt;</code> is mandatory even if your function does not have any parameters.</p>
<pre><code>(* Multiple statments *)
{ =&gt; do
    io.println(&quot;Gaya&quot;).
    io.println(&quot;is&quot;).
    io.println(&quot;cool!&quot;).
  end
}(). (* Output: Gaya\nis\ncool! *)
</code></pre>
<p>In this example we are immediatly invoking the function, but you can also store
it for later:</p>
<pre><code>add :: { x, y =&gt; x + y }
add(1, 2). (* Output: 3 *)
</code></pre>
<p><code>::</code> is used to declare variables at the top level. You could also store it in
a local binding using a <code>let</code> expression, since functions are first-class
citizens in Gaya.</p>
<h2 id="trailing-functions"><a class="header" href="#trailing-functions">Trailing functions</a></h2>
<p>If the last argument to a function call is itself a function, you can put it
outside the parenthesis (a so called <em>trailing function</em>):</p>
<pre><code>(1, 2, 3, 4)
  |&gt; seq.takewhile(_) { x =&gt; x &lt; 4 }
  |&gt; seq.dropwhile(_) { x =&gt; x &lt; 2 }
  |&gt; seq.toarray(_)
  |&gt; assert(_ == (2, 3)).
</code></pre>
<p><strong>NOTE</strong> To use the functions in this snippet, you need to <code>include &quot;sequences&quot;</code>. More on include statements and sequences later.</p>
<h2 id="default-arguments"><a class="header" href="#default-arguments">Default arguments</a></h2>
<p>Functions may also have default arguments. If present, default arguments should
go at the end of the parameter list.</p>
<pre><code>greet :: { name = &quot;Gaya&quot; =&gt;
  &quot;Hello &quot; &lt;&gt; name &lt;&gt; &quot;!&quot;
}
</code></pre>
<h2 id="typing-parameters"><a class="header" href="#typing-parameters">Typing parameters</a></h2>
<p>Function parameters may be given type hints. These will be used to check at
runtime that the type of the argument is correct. If it isn't, a runtime error
will occur. This can be considered a nicer way of doing <code>assert(typeof(param) == &quot;SomeType&quot;)</code>. For example:</p>
<pre><code>sum :: { x: Number, y: Number =&gt;
  x + y
}
</code></pre>
<p>Possible types are:</p>
<ul>
<li>Any</li>
<li>Array</li>
<li>Dictionary</li>
<li>Function</li>
<li>Number</li>
<li>Sequence</li>
<li>String</li>
<li>Unit</li>
</ul>
<p>The type <code>Sequence</code> denotes any sequence-convertible type, such as <code>String</code> and
<code>Number</code>.</p>
<p>You can also define your custom types with a <em>type declaration</em>:</p>
<pre><code>type NonNegative of Number with _ &gt; 0
</code></pre>
<p>Here we are defining a type <code>NonNegative</code> that is a subset of <code>Number</code> that
also checks at runtime that the given number is greater than zero. The
constraint given after <code>with</code> can be an arbitrary expression. The value of the
argument will be available as <code>_</code>.</p>
<h2 id="patterns-as-parameters"><a class="header" href="#patterns-as-parameters">Patterns as parameters</a></h2>
<p>The parameters of a function can be an arbitrary pattern, not just identifiers.
You can use this feature, for example, to destructure an array parameter:</p>
<pre><code>(1 -&gt; 2, 3 -&gt; 3)
  |&gt; seq.foreach(_) { (key, value) =&gt; io.println(tostring(key) &lt;&gt; &quot;:&quot; &lt;&gt; value) }
</code></pre>
<p>See the section on match expression for a more detailed introduction to
pattern matching in Gaya.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="let-expression"><a class="header" href="#let-expression">Let Expression</a></h1>
<p><code>let</code> expressions are used to introduce local bindings. Each binding in the
bindings list is available to the next one, so you can do things like:</p>
<pre><code>let x = 5, y = x + 1 in io.println(y). (* Output: 6 *)
</code></pre>
<p>A more OCaml style is also possible:</p>
<pre><code>let x = 5 in
let y = x + 1 in
io.println(y).
</code></pre>
<p>What comes after the <code>let</code> keyword can be an arbitrary pattern, not just an
identifier. For example:</p>
<pre><code>let xs = (1, 2, 3) in
let (x, y, z) = xs in do
  assert(x == 1).
  assert(y == 2).
  assert(z == 3).
end.

let &quot;A&quot; = &quot;A&quot; in unit.
let _ = &quot;A&quot; in unit.
let x = &quot;A&quot; in assert(x == &quot;A&quot;).
let x = 12, 12 = x in assert(x == 12).
</code></pre>
<p>See the section on match expressions for a more detailed introduction to
pattern matching in Gaya.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cases-expression"><a class="header" href="#cases-expression">Cases Expression</a></h1>
<p><code>cases</code> expressions are Gaya's take on if statements. Basically, the following
C code:</p>
<pre><code class="language-cpp">int x = 2;
if (x == 0) /* ... */
else if (x == 1) /* ... */
else /* ... */
</code></pre>
<p>translates to the following Gaya:</p>
<pre><code class="language-ocaml">let x = 2 in
cases
  given x == 0 =&gt; (* ... *)
  given x == 1 =&gt; (* ... *)
  otherwise    =&gt; (* ... *)
end
</code></pre>
<p>With the major difference that <code>cases</code> is an expression, so you can use it as
value. For example, a function that returns the greater of two numbers may be
written like this:</p>
<pre><code class="language-ocaml">max :: { x, y =&gt;
  cases
    given x &gt; y =&gt; x
    otherwise   =&gt; y
  end
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="match-expression"><a class="header" href="#match-expression">Match Expression</a></h1>
<p>Match expressions are cases expression on steriods. They bring to Gaya a simple
form of pattern matching like the one you find in programming languages like
Rust or OCaml.</p>
<pre><code>test :: { xs =&gt;
  cases xs
    given x when x == 42   =&gt; &quot;life is&quot; &lt;&gt; x
    given (x, _, (42, 69)) =&gt; x
    given ((42, 69), y, _) =&gt; y
    otherwise              =&gt; &quot;dunno&quot;
  end
}
</code></pre>
<p>After the <code>cases</code> keyword goes the <em>target</em> against which you want to match.
Then comes a series of match branches. Each branch consists of a pattern,
followed by an optional <code>when</code> clause, followed the branch value.</p>
<p>A branch is considered to match is the pattern matches and the conditon, if
given, is truthy.</p>
<p>An optional <code>otherwise</code> branch may be given as a fallback in case no other
branch matches. In the case that no branch matches and no <code>otherwise</code> branch is
given, the result of the match expression is <code>unit</code>.</p>
<h2 id="patterns"><a class="header" href="#patterns">Patterns</a></h2>
<p>A pattern can be one of the following:</p>
<ul>
<li><strong>A wildcard</strong>: '_' which matches everything.</li>
<li><strong>An identifier</strong>: for example 'x', which also matches everything but
additionally binds the target to the name of the identifier.</li>
<li><strong>An array pattern</strong>: which is an arbitrarily nested series of
comma-separated patterns surrounded by '(' and ')', like and array. This will
match if the target is an array and every one of its elements matches the
corresponding pattern.</li>
<li><strong>An arbitrary expression</strong>: which will be compared for equality with the
target.</li>
</ul>
<p>Sometimes you may want to match an array and also capture the whole array. You
can do this with <em>as patterns</em>:</p>
<pre><code>cases someFunc()
  given xs@(x, y, z) =&gt; (* do something *)
end
</code></pre>
<p>You introduce an as-pattern by using an identifier followed by an <code>@</code> before
the pattern. The whole match will be available under the name of the
identifier.</p>
<p>Finally, patterns can be used in a number of places in Gaya, such as in let
expressions and function parameters. See the corresponding chapters for more on
that.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="do-expression"><a class="header" href="#do-expression">Do Expression</a></h1>
<p>A <code>do</code> expression is simply a way to group statements. All but the last element
in the body <em>must</em> be statements. If the last element is an expression, its
value is returned, else, if it's a statement, unit is returned.</p>
<pre><code class="language-ocaml">(* Results in 42*)
do
  io.println(&quot;A statement&quot;).
  42
end

(* Results in unit *)
do
  let x = 0 in perform
  while x &lt; 10
    &amp;x &lt;- x + 1
  end.
end
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="control-flow"><a class="header" href="#control-flow">Control Flow</a></h1>
<h2 id="while-loops"><a class="header" href="#while-loops">While loops</a></h2>
<p>While loops work as you'd expect in other programming languages:</p>
<pre><code class="language-ocaml">let x = 0 in perform
while x &lt; 10
  io.println(x).
  &amp;x &lt;- x + 1
end
</code></pre>
<p>An optional continuation statement may be put after the while condition like in
Zig. So the last example could be rewritten to:</p>
<pre><code class="language-ocaml">let x = 0 in perform
while x &lt; 10 : &amp;x &lt;- x + 1
  io.println(x).
end
</code></pre>
<p>Finally, you can also use an initialization statement, which would make Gaya's
while loops the essentially the same as C's for-loops:</p>
<pre><code>while let i = 0 : i &lt; 10 : &amp;i &lt;- i + 1
  io.println(i).
end
</code></pre>
<p>The body of the while loop should consist entirely of statements. This means
that if you call a function, you need to discard its result explicitely if you
are not going to use it.</p>
<h2 id="break-and-continue"><a class="header" href="#break-and-continue">Break and continue</a></h2>
<p>There are no <code>break</code> and <code>continue</code>. Gaya doesn't have any non-local
control-flow statements in order to favor structured programming. If you think
this is too much of a problem, feel free to open an issue on the
<a href="https://github.com/aloussase/gaya">repo</a> about it.</p>
<h2 id="for-loops"><a class="header" href="#for-loops">For loops</a></h2>
<p>For loops in Gaya are used to iterate over sequences. Just like with while
loops, the body of a for-loop should consist only of statements. For example:</p>
<pre><code>for x in 42
  io.println(x).
end
</code></pre>
<p>This would print the numbers from 0 to 41.</p>
<p>Note that the above example may also be written by using the <code>seq.foreach</code>
function from the <code>sequences</code> library:</p>
<pre><code>seq.foreach(42) { x =&gt;
  io.println(x).
}.
</code></pre>
<p>The only difference is that the for-loop is a statement and the function call
is an expression, so they are used differently in different contexts.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="assignment"><a class="header" href="#assignment">Assignment</a></h1>
<p>The assignment operator <code>&lt;-</code> can be used to mutate local variables (those
introduced with <code>let</code>). It cannot be used on global definitions or function
parameters.</p>
<p>To assign to a local variable, prefix if with an ampersand (<code>&amp;</code>):</p>
<pre><code class="language-ocaml">let x = 0 in do
  &amp;x &lt;- 10
  io.println(x)
end.
</code></pre>
<p>The assignment operator can only be used in <em>local statements</em>, meaning <code>do</code>
blocks, the body of <code>while</code> and <code>for</code> loops, and the argument to <code>perform</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="closures"><a class="header" href="#closures">Closures</a></h1>
<p>Closure are functions that capture their environment. For a thorough
introduction to closures, check out
<a href="https://en.wikipedia.org/wiki/Closure_(computer_programming)">this</a> wikipedia
article.</p>
<p>An example from that article translated to Gaya:</p>
<pre><code class="language-ocaml">f :: { x =&gt;
  { y =&gt; x + y }
}

a :: f(1)

io.println(a(5)). (* Output: 6 *)
</code></pre>
<p>In this example <code>f</code> returns a closure that captures the parameter <code>x</code>.</p>
<p>The combination of closures and assignment allows us to simulate stateful
objects:</p>
<pre><code class="language-ocaml">mkCounter :: { =&gt;
  let count = 0 in { =&gt;
    let previous = count in do
      &amp;count &lt;- count + 1
      previous
    done
  }
}

counter :: mkCounter()

io.println(counter()). (* Output: 0 *)
io.println(counter()). (* Output: 1 *)
</code></pre>
<p>Really cool ;). See the <code>object.gaya</code> example in the <code>examples</code> directory of
the repository's root to see how we can simulate message passing using just
closures.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="include-statements"><a class="header" href="#include-statements">Include Statements</a></h1>
<p><code>include</code> is used to evaluate the contents of a file in the interpreter's
environment. This is basically the poor man's imports, but it works good
enough.</p>
<p>If a file is included more than once, its contents will be evaluated only one.</p>
<p>For example, in A.gaya:</p>
<pre><code>io.println(&quot;From A&quot;).
</code></pre>
<p>And in B.gaya:</p>
<pre><code>include &quot;A&quot;
include &quot;A&quot;
</code></pre>
<p>Will only print &quot;From A&quot; once.</p>
<p>The argument to include is a string that represents a relative path to a file
in the same directory of the executing script, with or without the '.gaya'
extension, or the name of a bundled library, like &quot;strings&quot; or &quot;sequences&quot;.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="structs"><a class="header" href="#structs">Structs</a></h1>
<p>Structs are data structures similar to dictionaries with a pre-defined set of
fields.</p>
<pre><code class="language-julia">struct Person
  name: String
  age:  Number
end
</code></pre>
<p>Here we are declaring a <code>Person</code> struct with two fields: name, which should be
a <code>String</code>, and age, which should be a <code>Number</code>. The types of the fields are
checked at runtime upon construction and assignment.</p>
<h2 id="constructing-structs"><a class="header" href="#constructing-structs">Constructing Structs</a></h2>
<p>To create an instance of a struct, you use a function of the same name as your
struct:</p>
<pre><code>p :: Person(&quot;John&quot;, 42)
</code></pre>
<p>If an argument of the wrong type is provided to the constructor, a runtime
error will occur.</p>
<h2 id="accessing-struct-fields"><a class="header" href="#accessing-struct-fields">Accessing Struct Fields</a></h2>
<p>You can access the fields of a struct using the <code>@</code> operator:</p>
<pre><code>assert(p@name == &quot;John&quot;)
</code></pre>
<h2 id="mutating-structs"><a class="header" href="#mutating-structs">Mutating Structs</a></h2>
<p>Struct fields may be assigned new values using the assignment operator, similar
to how it works with dictionaries.</p>
<pre><code>&amp;p@name &lt;- &quot;Jane&quot;
</code></pre>
<p>Again, the type of the new value is checked at runtime.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="enums"><a class="header" href="#enums">Enums</a></h1>
<p>Enums are C style enumerations.</p>
<pre><code class="language-julia">enum Color
  red
  green
  blue
end

myColor :: Color@red

assert(myColor == Color@red).
</code></pre>
<p>They can be used as keys in dictionaries:</p>
<pre><code>colors :: (-&gt;)

dict.set(colors, Color@red, 0xff0000).
dict.set(colors, Color@green, 0x00ff00).
dict.set(colors, Color@blue, 0x0000ff).
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="string"><a class="header" href="#string">String</a></h1>
<p>Gaya strings are backed by C++ <code>std::string</code>.</p>
<p>Strings are defined as a sequence of characters between double quotes:</p>
<pre><code class="language-ocaml">&quot;Hello&quot;

&quot;Hello\nGaya!&quot;

&quot;Hello \x1b[31mGaya\x1b[m&quot;
</code></pre>
<p>They support all escape sequences specified in the JSON grammar, except unicode
(which is to come some day, maybe).</p>
<p>Strings are callable objects. Calling a string is equivalent to the indexing
operation in other languages:</p>
<pre><code class="language-ocaml">&quot;Gaya&quot;(0) (* G *)
</code></pre>
<p>Providing an invalid index will result in a runtime error.</p>
<p>Strings participate in the sequence protocol. That means you can use
<code>tosequence</code> and <code>seq.next</code> on them. Also, all functions in the sequence
library (<code>runtime/sequences.gaya</code>) work on strings.</p>
<p>For operations available on strings, see <code>runtime/strings.gaya</code> and
<code>include/builtins/string.hpp</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arrays-1"><a class="header" href="#arrays-1">Arrays</a></h1>
<p>Gaya arrays are backed by C++ <code>std::vector</code>.</p>
<p>Arrays are defined as a list of comma separated expressions between
parenthesis:</p>
<pre><code class="language-ocaml">(1, 2, 3).

(io.println(&quot;Hello&quot;), 1 + 2).
</code></pre>
<p>Arrays are callable objects. The call operation corresponds to indexing in
other languages:</p>
<pre><code class="language-ocaml">(1, 2, 3)(0)
</code></pre>
<p>Providing an invalid index will result in a runtime error.</p>
<p>Arrays participate in the sequence protocol. That means you can use
<code>tosequence</code> and <code>seq.next</code> on them. Also, all functions in the sequence
library (<code>runtime/sequences.gaya</code>) work on arrays.</p>
<p>For operations available on arrays, see <code>runtime/arrays.gaya</code> and
<code>include/builtins/array.hpp</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dictionary"><a class="header" href="#dictionary">Dictionary</a></h1>
<p>Dictionaries are backed by
<a href="https://github.com/martinus/robin-hood-hashing"><code>robin_hood::unordered_map</code></a>,
a fast and efficient C++ hash table implementation.</p>
<p>They are defined as a sequence of expression pairs separated by a <code>-&gt;</code> between
parenthesis.</p>
<pre><code>(&quot;name&quot; -&gt; &quot;Gaya&quot;, &quot;species&quot; -&gt; &quot;Cat&quot;).
</code></pre>
<p>The empty dictionary is denoted <code>(-&gt;)</code>, because <code>()</code> already stands for the
empty array.</p>
<p>Dictionaries are callable objects. Calling a dictionary will attempt to
retrieve the value for the corresponding key. If the attempt fails, unit if
returned.</p>
<pre><code>(&quot;name&quot; -&gt; &quot;Gaya&quot;)(&quot;name&quot;).     (* &quot;Gaya&quot; *)
(&quot;name&quot; -&gt; &quot;Gaya&quot;)(&quot;species&quot;).  (* unit *)
</code></pre>
<p>Dictionaries participate in the sequence protocol as a stream of two element
arrays, each containing a corresponding key-value pair from the dictionary.</p>
<p>You can use <code>tosequence</code> and <code>seq.next</code> on them. Also, all functions in the
sequence library (<code>runtime/sequences.gaya</code>) work on dictionaries.</p>
<p>For operations available on dictionaries, see <code>runtime/dictionaries.gaya</code> and
<code>include/builtins/dict.hpp</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sequence"><a class="header" href="#sequence">Sequence</a></h1>
<p>Sequences are like lazy iterators in other programming languages. They can be
considered streams that compute their contents on demand. Sequences can be
created from a number of other objects using the <code>tosequence</code> builtin function.</p>
<pre><code>include &quot;sequences&quot;

seq.range(1, 10000000).

seq.range(1, 10000000)
  |&gt; seq.take(_, 3)
  |&gt; seq.toarray(_)
  |&gt; assert(_ == (1, 2, 3)).
</code></pre>
<p>This creates a sequence over the numbers from 1 to 10000000, but doesn't
actually compute anything, so its instantaneous.</p>
<p>To get the next element in a sequence, use the <code>seq.next</code> function. This
function will return the successive elements of the sequence, or unit if the
sequence has been completely consumed.</p>
<pre><code>xs :: tosequence(&quot;Gaya&quot;)

seq.next(xs). (* G *)
seq.next(xs). (* a *)
seq.next(xs). (* y *)
seq.next(xs). (* a *)
seq.next(xs). (* unit *)
</code></pre>
<p>Consult the documentation of each object to know if they support the sequence
protocol.</p>
<p>For operations available on sequences, see <code>runtime/sequences.gaya</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="core"><a class="header" href="#core">Core</a></h1>
<h3 id="typeof"><a class="header" href="#typeof"><code>typeof</code></a></h3>
<p>Return the type of an object as a string.
See src/object/typeof.cpp for the possible types.</p>
<pre><code>@param o &lt;object&gt; The object for which to return the type.
</code></pre>
<h3 id="assert"><a class="header" href="#assert"><code>assert</code></a></h3>
<p>Assert that something is truthy. If false, an intepreter error occurs with
the message that an assertion failed.</p>
<pre><code>@param what &lt;object&gt; An object to assert.
</code></pre>
<h3 id="tostring"><a class="header" href="#tostring"><code>tostring</code></a></h3>
<p>Return the string representation of the provided object.</p>
<pre><code>@param o &lt;object&gt; The object for which to return the string representation.
</code></pre>
<h3 id="issequence"><a class="header" href="#issequence"><code>issequence</code></a></h3>
<p>Return whether a given object can act as a sequence.</p>
<pre><code>@param o &lt;object&gt; The object to test.
</code></pre>
<h3 id="tosequence"><a class="header" href="#tosequence"><code>tosequence</code></a></h3>
<p>Convert the provided object into its sequence representation.</p>
<pre><code>@param o &lt;object&gt; The object for which to return a sequence.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="io"><a class="header" href="#io">IO</a></h1>
<h3 id="ioprintln"><a class="header" href="#ioprintln"><code>io.println</code></a></h3>
<p>Print a line of text to standard output.</p>
<pre><code>@param line &lt;string&gt; The line to print.
</code></pre>
<h3 id="ioprint"><a class="header" href="#ioprint"><code>io.print</code></a></h3>
<p>Print some text to standard output.</p>
<pre><code>@param text &lt;string&gt; The text to print.
</code></pre>
<h3 id="ioreadline"><a class="header" href="#ioreadline"><code>io.readline</code></a></h3>
<p>Read a line of text from standard input. The resulting line will not include
the newline.</p>
<h3 id="ioreadfile"><a class="header" href="#ioreadfile"><code>io.readfile</code></a></h3>
<p>Read the contents of a file. If the file does not exist, unit is returned.</p>
<pre><code>@param filename &lt;string&gt; The name of the file to read.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="strings-1"><a class="header" href="#strings-1">Strings</a></h1>
<pre><code>include &quot;strings&quot;
</code></pre>
<h3 id="stringlength"><a class="header" href="#stringlength"><code>string.length</code></a></h3>
<p>Return the length of the string.</p>
<pre><code>@param s &lt;string&gt; The string for which to calculate the length.
</code></pre>
<h3 id="stringconcat"><a class="header" href="#stringconcat"><code>string.concat</code></a></h3>
<p>Return the concatenation of the second string onto the first one.</p>
<pre><code>@param s1 &lt;string&gt; The first string.
@param s2 &lt;string&gt; The string to tack onto the end of the first one.
</code></pre>
<h3 id="stringtonumber"><a class="header" href="#stringtonumber"><code>string.tonumber</code></a></h3>
<p>Convert a string to a number.</p>
<p>Unit is returned if the conversion failed.</p>
<pre><code>@param s &lt;string&gt; The string to try to parse as a number.
</code></pre>
<h3 id="stringindex"><a class="header" href="#stringindex"><code>string.index</code></a></h3>
<p>Return the index in the string where the provided pattern starts, or unit if
the pattern is not contained in the string.</p>
<pre><code>@param haystack &lt;string&gt; The string in which to search for the pattern.
@param needle &lt;string&gt; The string to search for.
</code></pre>
<h3 id="stringsubstring"><a class="header" href="#stringsubstring"><code>string.substring</code></a></h3>
<p>Return a substring of the given string.</p>
<p>If finish &lt; start or start &lt; 0 or finish &gt; string.length(s), unit
is returned instead.</p>
<pre><code>@param s &lt;string&gt; The string from which to extract the substring.
@param start &lt;number&gt; The start of the substring.
@param finish &lt;number&gt; The end of the substring.
</code></pre>
<h3 id="stringstartswith"><a class="header" href="#stringstartswith"><code>string.startswith</code></a></h3>
<p>Return whether a string starts with the given pattern.</p>
<pre><code>@param s &lt;string&gt; The string to test.
@param pattern &lt;string&gt; The pattern to search for in s.
@param pos &lt;number&gt; The position in s from where to start testing.
</code></pre>
<h3 id="stringendswith"><a class="header" href="#stringendswith"><code>string.endswith</code></a></h3>
<p>Return whether a string ends with the given pattern.</p>
<pre><code>@param s &lt;string&gt; The string to test.
@param pattern &lt;string&gt; The pattern to search for in s.
</code></pre>
<h3 id="stringtrim"><a class="header" href="#stringtrim"><code>string.trim</code></a></h3>
<p>Return a new string that is the result of trimming the leading and trailing
whitespace from the provided string.</p>
<pre><code>@param s &lt;string&gt; The string to trim.
</code></pre>
<h3 id="stringisempty"><a class="header" href="#stringisempty"><code>string.isempty</code></a></h3>
<p>Return whether the provided string is empty or not.</p>
<h3 id="stringfirst"><a class="header" href="#stringfirst"><code>string.first</code></a></h3>
<p>Return the first character in a string, or unit if empty.</p>
<h3 id="stringlast"><a class="header" href="#stringlast"><code>string.last</code></a></h3>
<p>Return the last character in a string, or unit if empty.</p>
<h3 id="stringcontains"><a class="header" href="#stringcontains"><code>string.contains</code></a></h3>
<p>Return whether the provided pattern is contained in s.</p>
<pre><code>@param s &lt;string&gt; The string to test for pattern.
@param pattern &lt;string&gt; The pattern to look for in s.
</code></pre>
<h3 id="stringsplit"><a class="header" href="#stringsplit"><code>string.split</code></a></h3>
<p>Splits a string on the given pattern and returns a sequence over the parts.</p>
<pre><code>@param s &lt;string&gt; The string to split.
@param pattern &lt;string&gt; The pattern to split the string on.
</code></pre>
<h3 id="stringsplitarray"><a class="header" href="#stringsplitarray"><code>string.splitArray</code></a></h3>
<p>Like string.split, but return an array instead of a sequence.</p>
<pre><code>@param s &lt;string&gt; The string to split.
@param pattern &lt;string&gt; The pattern to split the string on
</code></pre>
<h3 id="stringiswhitespace"><a class="header" href="#stringiswhitespace"><code>string.iswhitespace</code></a></h3>
<p>Return whether a string is a whitespace character.</p>
<pre><code>@param s &lt;string&gt; The string to test.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arrays-2"><a class="header" href="#arrays-2">Arrays</a></h1>
<pre><code>include &quot;arrays&quot;
</code></pre>
<h3 id="arraylength"><a class="header" href="#arraylength"><code>array.length</code></a></h3>
<p>Return the length of an array.</p>
<pre><code>@param a &lt;array&gt; The array.
</code></pre>
<h3 id="arrayisempty"><a class="header" href="#arrayisempty"><code>array.isempty</code></a></h3>
<p>Return whether the given array is empty.</p>
<pre><code>@param a &lt;array&gt; The array.
</code></pre>
<h3 id="arrayconcat"><a class="header" href="#arrayconcat"><code>array.concat</code></a></h3>
<p>Append the elements of the second array to the end first one.</p>
<p>This mutates the first array.</p>
<pre><code>@param a1 &lt;array&gt; The array onto which to append elements.
@param a2 &lt;array&gt; The array from which to extract elements.
</code></pre>
<h3 id="arraypush"><a class="header" href="#arraypush"><code>array.push</code></a></h3>
<p>Append an element to the end of the array.</p>
<p>This mutates the original array.</p>
<pre><code>@param a &lt;array&gt; The array onto which to push the element.
@param o &lt;object&gt; The element to append.
</code></pre>
<h3 id="arraypop"><a class="header" href="#arraypop"><code>array.pop</code></a></h3>
<p>Remove and return the last element of the array.</p>
<p>This mutates the original array.</p>
<pre><code>@param a &lt;array&gt; The array from which to remove the last element.
</code></pre>
<h3 id="arraysort"><a class="header" href="#arraysort"><code>array.sort</code></a></h3>
<p>Sort the provided array in place.</p>
<p>The sorting is performed according to the provided comparison function.</p>
<pre><code>@param a &lt;array&gt; The array to sort.
@param cmp &lt;function&gt; A comparison function.
</code></pre>
<h3 id="arrayrange"><a class="header" href="#arrayrange"><code>array.range</code></a></h3>
<p>Return an array with the numbers from start to finish exclusive.</p>
<pre><code>@param start &lt;number&gt; The start of the range.
@param finish &lt;number&gt; The non-inclusive end of the range. *)
</code></pre>
<h3 id="arrayjoin"><a class="header" href="#arrayjoin"><code>array.join</code></a></h3>
<p>Return a string that is the result of joining the elements of the provided
array by the given separator.</p>
<pre><code>@param a &lt;array&gt; The array to join.
@param sep &lt;string&gt; The separator to use
</code></pre>
<h3 id="arrayset"><a class="header" href="#arrayset"><code>array.set</code></a></h3>
<p>Replace the element at the specified position with the provided object.</p>
<pre><code>@param a &lt;array&gt; The array.
@param index &lt;number&gt; The index at which to replace the element.
@param o &lt;object&gt; The object to replace the element with.
@return The provided array.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dictionaries-1"><a class="header" href="#dictionaries-1">Dictionaries</a></h1>
<pre><code>include &quot;dictionaries&quot;
</code></pre>
<h3 id="dictlength"><a class="header" href="#dictlength"><code>dict.length</code></a></h3>
<p>Return the number of items in the provided dictionary.</p>
<pre><code>@param dict &lt;dictionary&gt; The dictionary.
</code></pre>
<h3 id="dictset"><a class="header" href="#dictset"><code>dict.set</code></a></h3>
<p>Insert a key-value pair in the provided dictionary.</p>
<p>This mutates the original dictionary.</p>
<pre><code>@param dict &lt;dictionary&gt; The dictionary in which to do the insertion.
@param key &lt;object&gt; The key.
@param value &lt;object&gt; The value.
@return The provided dictionary.
</code></pre>
<h3 id="dictremove"><a class="header" href="#dictremove"><code>dict.remove</code></a></h3>
<p>Remove the specified key-value pair from the dictionary.</p>
<p>This mutates the original dictionary.</p>
<pre><code>@param dict &lt;dictionary&gt; The dictionary from which to remove the pair.
@param key &lt;object&gt; The key to remove.
@return The removed value.
</code></pre>
<h3 id="dictcontains"><a class="header" href="#dictcontains"><code>dict.contains</code></a></h3>
<p>Returns a truthy value if the specified key has a corresponding value in the
provided dictionary, unit otherwise.</p>
<pre><code>@param dict &lt;dictionary&gt; The dictionary to test.
@param key &lt;object&gt; The key of interest.
</code></pre>
<h3 id="dictkeys"><a class="header" href="#dictkeys"><code>dict.keys</code></a></h3>
<p>Return a sequence over the keys of the provided dictionary.</p>
<h3 id="dictvalues"><a class="header" href="#dictvalues"><code>dict.values</code></a></h3>
<p>Return a sequence over the values of the provided dictionary.</p>
<h3 id="dictsetdefault"><a class="header" href="#dictsetdefault"><code>dict.setdefault</code></a></h3>
<p>Set the value for a given key in the provided dictionary, or a default value
if the key is not found.</p>
<p>The new value if computed from the old value by applying to it a
transformation function.</p>
<pre><code>@param dict &lt;dictionary&gt; The dictionary.
@param key &lt;object&gt; The key.
@param valueFunc &lt;function&gt; The function to compute the new value.
@param default &lt;object&gt; The default value in case the key is not found.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sequences"><a class="header" href="#sequences">Sequences</a></h1>
<pre><code>include &quot;sequences&quot;
</code></pre>
<h3 id="seqnext"><a class="header" href="#seqnext"><code>seq.next</code></a></h3>
<p>Return the next element in the sequence, or unit if there is none.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence from which to retrieve the next element.
</code></pre>
<h3 id="seqmake"><a class="header" href="#seqmake"><code>seq.make</code></a></h3>
<p>Create a new user defined sequence from the provided callable.</p>
<p>The given callable should return the next element on each invocation, and
unit when it is done.</p>
<pre><code>@param cb &lt;function&gt; The function to be invoked to retrieve the next element.
</code></pre>
<h3 id="seqforeach"><a class="header" href="#seqforeach"><code>seq.foreach</code></a></h3>
<p>Call the provided function for each element in the sequence, discarding
the results.</p>
<pre><code>@param s &lt;sequence&gt; A sequence.
@param f &lt;function&gt; A function to call on every element in the sequence.
</code></pre>
<h3 id="seqreduce"><a class="header" href="#seqreduce"><code>seq.reduce</code></a></h3>
<p>Reduce the provided sequence according to the specified accumulator function,
using the given initial element. Return the initial element if the sequence
was empty.</p>
<pre><code>@param s &lt;sequence&gt; A sequence.
@param init &lt;object&gt; The initial element.
@param f &lt;function&gt; The accumulator function.
</code></pre>
<h3 id="seqany"><a class="header" href="#seqany"><code>seq.any</code></a></h3>
<p>Return true if any element in the provided sequence satisfies the given
predicate.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence on which to operate.
@param pred &lt;function&gt; A predicate.
</code></pre>
<h3 id="seqall"><a class="header" href="#seqall"><code>seq.all</code></a></h3>
<p>Returns whether all the elements in the provided sequence satifsy
the given predicate.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence on which to operate.
@param pred &lt;function&gt; A predicate.
</code></pre>
<h3 id="seqmax"><a class="header" href="#seqmax"><code>seq.max</code></a></h3>
<p>Return the greatest element in a sequence according to the '&gt;' operator.</p>
<p>If the sequence is empty, unit is returned.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
</code></pre>
<h3 id="seqmin"><a class="header" href="#seqmin"><code>seq.min</code></a></h3>
<p>Return the least element in a sequence according to the '&lt;' operator.</p>
<p>If the sequence is empty, unit is returned.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
</code></pre>
<h3 id="seqminmax"><a class="header" href="#seqminmax"><code>seq.minmax</code></a></h3>
<p>Return an array containing the least and greatest elements in a sequence
according to the '&lt;' and '&gt;' operators respectively.</p>
<p>If the sequence is empty, unit is returned.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
</code></pre>
<h3 id="seqmap"><a class="header" href="#seqmap"><code>seq.map</code></a></h3>
<p>Return a new sequence that maps the given function over the elements of the
provided sequence.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
@param f &lt;function&gt; The transformation function.
</code></pre>
<h3 id="seqmapwithindex"><a class="header" href="#seqmapwithindex"><code>seq.mapWithIndex</code></a></h3>
<p>Like map, but the callback function additionally receives the element index
as its first argument.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
@param func &lt;function&gt; The transformation function.
</code></pre>
<h3 id="seqfilter"><a class="header" href="#seqfilter"><code>seq.filter</code></a></h3>
<p>Return a new sequence that filters out elements for which the provided
predicate function returns false.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence to filter.
@param pred &lt;function&gt; The predicate.
</code></pre>
<h3 id="seqzip"><a class="header" href="#seqzip"><code>seq.zip</code></a></h3>
<p>Return a new sequence that applies the provided function to the elements of
the given sequence in a pairwise manner.</p>
<pre><code>@param xs &lt;sequence&gt; The first sequence.
@parma ys &lt;sequence&gt; The second sequence.
</code></pre>
<h3 id="seqtakewhile"><a class="header" href="#seqtakewhile"><code>seq.takewhile</code></a></h3>
<p>Return a sequence that takes elements from the input sequences as long as
they satisfy the given predicate.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
@param pred &lt;function&gt; The predicate.
</code></pre>
<h3 id="seqtake"><a class="header" href="#seqtake"><code>seq.take</code></a></h3>
<p>Return a sequence that takes the first n elements of the provided one.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
@param n &lt;number&gt; The number of elements to take.
</code></pre>
<h3 id="seqdropwhile"><a class="header" href="#seqdropwhile"><code>seq.dropwhile</code></a></h3>
<p>Return a sequence that drops elements from the input sequence as long as they
satisfy the given predicate.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
@param pred &lt;function&gt; The predicate.
</code></pre>
<h3 id="seqdrop"><a class="header" href="#seqdrop"><code>seq.drop</code></a></h3>
<p>Return a new sequence that drops the first n elements of the provided one.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
@param n &lt;number&gt; The number of elements to drop.
</code></pre>
<h3 id="seqrange"><a class="header" href="#seqrange"><code>seq.range</code></a></h3>
<p>Create a sequence that yields the numbers from start inclusive to end
exclusive.</p>
<pre><code>@param start &lt;number&gt; The inclusive start of the range.
@param finish &lt;number&gt; The non-inclusive end of the range.
</code></pre>
<h3 id="seqenumerate"><a class="header" href="#seqenumerate"><code>seq.enumerate</code></a></h3>
<p>Return a sequence that yields 2 element arrays where the first element is the
index of the second element from the provided sequence.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence to enumerate.
</code></pre>
<h3 id="seqtoarray"><a class="header" href="#seqtoarray"><code>seq.toarray</code></a></h3>
<p>Return an array with the elements of the provided sequence.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
</code></pre>
<h3 id="seqtostring"><a class="header" href="#seqtostring"><code>seq.tostring</code></a></h3>
<p>Return a string with the elements of the provided sequence.</p>
<p><code>tostring</code> is called on every element of the sequence to transform it to a
string.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
</code></pre>
<h3 id="seqsum"><a class="header" href="#seqsum"><code>seq.sum</code></a></h3>
<p>Return the sum of the numbers in the provided sequence.</p>
<p>This function consumes the provided sequence.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
</code></pre>
<h3 id="seqcount"><a class="header" href="#seqcount"><code>seq.count</code></a></h3>
<p>Return the number of elements in a sequence.</p>
<p>This function consumes the provided sequence.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
</code></pre>
<h3 id="seqfirst"><a class="header" href="#seqfirst"><code>seq.first</code></a></h3>
<p>Return the first element in the sequence, or unit if there are none.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence.
</code></pre>
<h3 id="seqinits"><a class="header" href="#seqinits"><code>seq.inits</code></a></h3>
<p>Returns a sequence over the initial elements of the provided sequence,
shortest first.</p>
<pre><code>@param xs &lt;Sequence&gt; The sequence.
</code></pre>
<h3 id="seqtails"><a class="header" href="#seqtails"><code>seq.tails</code></a></h3>
<p>Returns a sequence over the final segments of the provided sequence,
longest first.</p>
<pre><code>@param xs &lt;Sequence&gt; The sequence.
</code></pre>
<h3 id="seqflatten"><a class="header" href="#seqflatten"><code>seq.flatten</code></a></h3>
<p>Creates a new sequence that flattens one level of the provided sequence.</p>
<pre><code>@param xs &lt;sequence&gt; The sequence to flatten.
</code></pre>
<h3 id="seqconcatmap"><a class="header" href="#seqconcatmap"><code>seq.concatMap</code></a></h3>
<p>Map a function over the elements of the provided sequence and concatenate
the resulting sequences.</p>
<pre><code>@param xs &lt;Sequence&gt; The input sequence.
@param func &lt;Function&gt; The transformation function that should return a
                       sequence.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="functions-1"><a class="header" href="#functions-1">Functions</a></h1>
<pre><code>include &quot;functions&quot;
</code></pre>
<h3 id="fnadd"><a class="header" href="#fnadd"><code>fn.add</code></a></h3>
<p>Corresponds to operator <code>+</code>.</p>
<h3 id="fnsub"><a class="header" href="#fnsub"><code>fn.sub</code></a></h3>
<p>Corresponds to operator <code>-</code>.</p>
<h3 id="fnmult"><a class="header" href="#fnmult"><code>fn.mult</code></a></h3>
<p>Corresponds to operator <code>*</code>.</p>
<h3 id="fndiv"><a class="header" href="#fndiv"><code>fn.div</code></a></h3>
<p>Corresponds to operator <code>/</code>.</p>
<h3 id="fnless"><a class="header" href="#fnless"><code>fn.less</code></a></h3>
<p>Corresponds to operator <code>&lt;</code>.</p>
<h3 id="fngreater"><a class="header" href="#fngreater"><code>fn.greater</code></a></h3>
<p>Corresponds to operator <code>&gt;</code>.</p>
<h3 id="fnequal"><a class="header" href="#fnequal"><code>fn.equal</code></a></h3>
<p>Corresponds to operator <code>==</code>.</p>
<h3 id="fnmax"><a class="header" href="#fnmax"><code>fn.max</code></a></h3>
<p>Return the greater of two objects.</p>
<pre><code>@param x &lt;object&gt; The first object.
@param y &lt;object&gt; The second object.
</code></pre>
<h3 id="fnmin"><a class="header" href="#fnmin"><code>fn.min</code></a></h3>
<p>Return the lesser of two objects.</p>
<pre><code>@param x &lt;object&gt; The first object.
@param y &lt;object&gt; The second object.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="math"><a class="header" href="#math">Math</a></h1>
<pre><code>include &quot;math&quot;
</code></pre>
<h3 id="mathfloor"><a class="header" href="#mathfloor"><code>math.floor</code></a></h3>
<p>Computes the floor of the given number.</p>
<pre><code>@param n &lt;number&gt; The number for which to compute the floor.
</code></pre>
<h3 id="mathceil"><a class="header" href="#mathceil"><code>math.ceil</code></a></h3>
<p>Computes the ceiling of the given number.</p>
<pre><code>@param n &lt;number&gt; The number for which to compute the ceiling.
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
